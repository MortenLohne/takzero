naive = [
    "naive",
    "tab:green",
    [
        [
            (0, -595, 48),
            (100000, -57, 13),
            (200000, -14, 12),
            (300000, 13, 12),
            (400000, 22, 15),
            (500000, 17, 20),
            (600000, 30, 12),
            (700000, 41, 16),
            (800000, 37, 13),
            (900000, 49, 12),
            (1000000, 47, 16),
            (1100000, 49, 15),
            (1200000, 55, 12),
            (1300000, 52, 12),
            (1400000, 62, 11),
            (1500000, 62, 14),
            (1600000, 61, 13),
            (1700000, 64, 11),
            (1800000, 70, 12),
            (1900000, 58, 13),
            (2000000, 67, 13),
        ],
    ],
]

undirected = [
    "undirected",
    "tab:blue",
    [
        [
            (0, -900, 102),
            (100000, -20, 12),
            (200000, 6, 13),
            (300000, 17, 13),
            (400000, 36, 12),
            (500000, 40, 12),
            (600000, -52, 17),
            (700000, 48, 16),
            (800000, 47, 13),
            (900000, 57, 13),
            (1000000, 57, 14),
            (1100000, 55, 13),
            (1200000, 60, 13),
            (1300000, 63, 16),
            (1400000, 63, 13),
        ],
        [
            (0, -827, 71),
            (100000, -27, 12),
            (200000, 2, 14),
            (300000, 8, 14),
            (400000, 36, 18),
            (500000, 36, 11),
            (600000, 46, 13),
            (700000, 44, 11),
            (800000, 49, 13),
            (900000, 52, 16),
            (1000000, 58, 16),
            (1100000, 53, 14),
            (1200000, 65, 12),
            (1300000, 61, 15),
            (1400000, 65, 12),
            (1500000, 62, 14),
            (1600000, 64, 17),
            (1700000, 73, 11),
            (1800000, 69, 13),
            (1900000, 63, 15),
            (2000000, 71, 15),
        ],
        [
            (0, -892, 49),
            (100000, -34, 11),
            (200000, 2, 13),
            (300000, 23, 13),
            (400000, 27, 15),
            (500000, 36, 10),
            (600000, 52, 12),
            (700000, 55, 12),
            (800000, 44, 12),
            (900000, 47, 13),
            (1000000, 56, 14),
            (1100000, 61, 12),
            (1200000, 63, 15),
            (1300000, 70, 13),
            (1400000, 70, 15),
            (1500000, 70, 12),
            (1600000, 61, 13),
            (1700000, 66, 14),
            (1800000, 67, 13),
            (1900000, 67, 11),
            (2000000, 76, 14),
        ],
    ],
]

directed = [
    "simhash $\\beta = \\frac{1}{4}$",
    "tab:orange",
    [
        [
            (0, -972, 132),
            (100000, -39, 14),
            (200000, 1, 13),
            (300000, 16, 12),
            (400000, 32, 12),
            (500000, 30, 12),
            (600000, 43, 15),
            (700000, 48, 15),
            (800000, 45, 16),
            (900000, 55, 13),
            (1000000, 59, 15),
            (1100000, 55, 13),
            (1200000, 65, 15),
            (1300000, 62, 19),
            (1400000, 64, 14),
            (1500000, 62, 12),
            (1600000, 68, 13),
            (1700000, 73, 14),
            (1800000, 67, 15),
            (1900000, 62, 16),
            (2000000, 72, 13),
        ],
        [
            (0, -910, 50),
            (100000, -42, 14),
            (200000, 2, 19),
            (300000, 6, 12),
            (400000, 30, 13),
            (500000, 35, 11),
            (600000, 39, 12),
            (700000, 44, 12),
            (800000, 42, 12),
            (900000, 53, 16),
            (1000000, 60, 13),
            (1100000, 56, 13),
            (1200000, 61, 12),
            (1300000, 60, 12),
            (1400000, 63, 13),
            (1500000, 61, 15),
            (1600000, 68, 13),
            (1700000, 70, 14),
            (1800000, 70, 14),
            (1900000, 72, 13),
            (2000000, 67, 12),
        ],
        [
            (0, -849, 82),
            (100000, -34, 12),
            (200000, -1, 12),
            (300000, 15, 11),
            (400000, 19, 12),
            (500000, 31, 13),
            (600000, 45, 15),
            (700000, 43, 12),
            (800000, 46, 16),
            (900000, 49, 16),
            (1000000, 51, 20),
            (1100000, 56, 13),
            (1200000, 62, 13),
            (1300000, 66, 11),
            (1400000, 57, 14),
            (1500000, 64, 12),
            (1600000, 62, 11),
            (1700000, 68, 14),
            (1800000, 62, 14),
            (1900000, 65, 11),
            (2000000, 71, 12),
        ],
    ],
]

runs = [
    undirected,
    directed,
    naive,
]

import numpy as np
import matplotlib.pyplot as plt
import matplotlib

matplotlib.rcParams.update({'font.size': 16})
matplotlib.rcParams.update({'figure.figsize': (8, 6)})

# for name, color, seeds in runs:
#     for seed in seeds:
#         plt.plot(
#             [x[1] for x in seed],
#             [x[2] for x in seed],
#             label=name,
#             color=color,
#             linewidth=2,
#         )
#         plt.fill_between(
#             [x[1] for x in seed],
#             [x[2] - x[3] for x in seed],
#             [x[2] + x[3] for x in seed],
#             color=color,
#             alpha=0.3,
#         )

for name, color, seeds in runs:
    points = [
        (
            np.mean([x[0] for x in xs]),  # pos
            np.mean([x[1] for x in xs]),  # mean
            np.std([x[1] for x in xs]),  # std
        )
        for xs in zip(*seeds)
    ]
    x = np.array([x for x, y, z in points])
    y = np.array([y for x, y, z in points])
    std = np.array([z for x, y, z in points])
    plt.plot(x, y, label=name, color=color, linewidth=2)
    plt.fill_between(x, y - std, y + std, color=color, alpha=0.3)


plt.grid()
plt.legend()
# plt.title("Replay Buffer Uniqueness")
plt.xlabel("Training steps")
plt.ylabel("Bayes Elo")
plt.savefig("elo.png", bbox_inches="tight", dpi=160)
